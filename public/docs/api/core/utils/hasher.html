<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>core.utils.hasher API documentation</title>
<meta name="description" content="Utilities to provide a &#39;standardized&#39; way of producing hashes to identify uniqueness â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em;background:#EEE}#content{padding:20px}#sidebar{padding:30px;overflow:hidden;background:#07085d}#sidebar > *:last-child{margin-bottom:2cm}#sidebar::-webkit-scrollbar{width:8px}#sidebar::-webkit-scrollbar-track{border-radius:10px;background:#f1f1f100}#sidebar::-webkit-scrollbar-thumb{border-radius:10px;background:linear-gradient( 37deg,rgb(247,70,58) 1%,rgb(180,62,121) 80% )}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}a.sidebar{color:white;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#f7463a}a.nav-header{color:white}img.logo-img{display:block;margin-left:auto;margin-right:auto;width:25%}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#e0e0e0;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{height:100vh;overflow:auto;position:sticky;top:0;background:#07085d}#content{width:70%;max-width:200ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
<!--<link rel="stylesheet"
href='https://cdevwebsitestaging.s3.amazonaws.com/bootstrap/css/bootstrap.min.css'>-->
<script href='/bootstrap/css/bootstrap.js'></script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>core.utils.hasher</code></h1>
</header>
<section id="section-intro">
<p>Utilities to provide a 'standardized' way of producing hashes to identify uniqueness. </p>
<p>These hash functions are <strong>not</strong>
cryptographically secure and should not be used for that. Instead, these functions should simply be used to create hashes
that will be used to track changes throughout the system.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Utilities to provide a &#39;standardized&#39; way of producing hashes to identify uniqueness. 

These hash functions are **not**
cryptographically secure and should not be used for that. Instead, these functions should simply be used to create hashes
that will be used to track changes throughout the system. 
&#34;&#34;&#34;

import hashlib
import os
from typing import List

from pydantic.types import FilePath

from core.utils.exceptions import Cdev_Error


class FILE_CACHE_CLASS:
    cache = {}


FILE_CACHE = FILE_CACHE_CLASS()


def hash_list(val: List[str], deliminator: str = &#34;;&#34;) -&gt; str:
    &#34;&#34;&#34;Hash a list of str values

    Note that the order of the list also determines the output, therefore if the input is stored in
    an unsorted collection, you should used `hash_set` instead.

    Args:
        val (List[str]): The list of str to produce a hash of
        deliminator (Optional[str]): A value use to seperate the input. Defaults to &#39;;&#39;

    Returns:
        str: hash of the values
    &#34;&#34;&#34;

    return hash_string(deliminator.join([str(x) for x in val]))


def hash_string(val: str) -&gt; str:
    &#34;&#34;&#34;Hash a str value

    Implemented using md5.

    Args:
        val (str): value to hash

    Returns:
        str: hash of the value
    &#34;&#34;&#34;
    return hashlib.md5(val.encode()).hexdigest()


def clear_file_cache():
    &#34;&#34;&#34;Clear the cache used by the `hash_file` utility.&#34;&#34;&#34;
    FILE_CACHE.cache = {}


def hash_file(fp: FilePath, bypass_cache: bool = False) -&gt; str:
    &#34;&#34;&#34;Hash a file given a path

    Note that the implementation contains a reference to a cache. Since this utility is primarily 
    used as an internal tool with the framework, the cache helps speeds things up when we know the file has
    not changed. Note that the framework periodically flushes this cache when needed within the context of 
    the execution of the framework using the `clear_file_cache` function. 

    If using this outside the confides of the framework, you can by pass the cache by setting the `bypass_cache`
    flag.

    Note that the implementation returns a md5 hash of the bytes in the file. 

    Args:
        fp (FilePath): Path to the file. Must be a resolvable path on the filesystem.
        bypass_cache (Optional[bool]): By pass the internal cache. Default False.

    Returns:
        str: hash of the file

    Raises:
        Cdev_Error
    &#34;&#34;&#34;
    if fp in FILE_CACHE.cache and not bypass_cache:
        return FILE_CACHE.cache.get(fp)


    if not os.path.isfile(fp):
        raise Cdev_Error(f&#34;Could not find file ({fp}) to hash&#34;, FileNotFoundError)

    with open(fp, &#34;rb&#34;) as fh:
        hash = hashlib.md5(fh.read()).hexdigest()

    FILE_CACHE.cache[fp] = hash

    return hash</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="core.utils.hasher.clear_file_cache"><code class="name flex">
<span>def <span class="ident">clear_file_cache</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Clear the cache used by the <code><a class="" title="core.utils.hasher.hash_file" href="#core.utils.hasher.hash_file">hash_file()</a></code> utility.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clear_file_cache():
    &#34;&#34;&#34;Clear the cache used by the `hash_file` utility.&#34;&#34;&#34;
    FILE_CACHE.cache = {}</code></pre>
</details>
</dd>
<dt id="core.utils.hasher.hash_file"><code class="name flex">
<span>def <span class="ident">hash_file</span></span>(<span>fp:Â pydantic.types.FilePath, bypass_cache:Â boolÂ =Â False) â€‘>Â str</span>
</code></dt>
<dd>
<div class="desc"><p>Hash a file given a path</p>
<p>Note that the implementation contains a reference to a cache. Since this utility is primarily
used as an internal tool with the framework, the cache helps speeds things up when we know the file has
not changed. Note that the framework periodically flushes this cache when needed within the context of
the execution of the framework using the <code><a class="" title="core.utils.hasher.clear_file_cache" href="#core.utils.hasher.clear_file_cache">clear_file_cache()</a></code> function. </p>
<p>If using this outside the confides of the framework, you can by pass the cache by setting the <code>bypass_cache</code>
flag.</p>
<p>Note that the implementation returns a md5 hash of the bytes in the file. </p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>fp</code></strong> :&ensp;<code>FilePath</code></dt>
<dd>Path to the file. Must be a resolvable path on the filesystem.</dd>
<dt><strong><code>bypass_cache</code></strong> :&ensp;<code>Optional[bool]</code></dt>
<dd>By pass the internal cache. Default False.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>hash of the file</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>Cdev_Error</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hash_file(fp: FilePath, bypass_cache: bool = False) -&gt; str:
    &#34;&#34;&#34;Hash a file given a path

    Note that the implementation contains a reference to a cache. Since this utility is primarily 
    used as an internal tool with the framework, the cache helps speeds things up when we know the file has
    not changed. Note that the framework periodically flushes this cache when needed within the context of 
    the execution of the framework using the `clear_file_cache` function. 

    If using this outside the confides of the framework, you can by pass the cache by setting the `bypass_cache`
    flag.

    Note that the implementation returns a md5 hash of the bytes in the file. 

    Args:
        fp (FilePath): Path to the file. Must be a resolvable path on the filesystem.
        bypass_cache (Optional[bool]): By pass the internal cache. Default False.

    Returns:
        str: hash of the file

    Raises:
        Cdev_Error
    &#34;&#34;&#34;
    if fp in FILE_CACHE.cache and not bypass_cache:
        return FILE_CACHE.cache.get(fp)


    if not os.path.isfile(fp):
        raise Cdev_Error(f&#34;Could not find file ({fp}) to hash&#34;, FileNotFoundError)

    with open(fp, &#34;rb&#34;) as fh:
        hash = hashlib.md5(fh.read()).hexdigest()

    FILE_CACHE.cache[fp] = hash

    return hash</code></pre>
</details>
</dd>
<dt id="core.utils.hasher.hash_list"><code class="name flex">
<span>def <span class="ident">hash_list</span></span>(<span>val:Â List[str], deliminator:Â strÂ =Â ';') â€‘>Â str</span>
</code></dt>
<dd>
<div class="desc"><p>Hash a list of str values</p>
<p>Note that the order of the list also determines the output, therefore if the input is stored in
an unsorted collection, you should used <code>hash_set</code> instead.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>val</code></strong> :&ensp;<code>List[str]</code></dt>
<dd>The list of str to produce a hash of</dd>
<dt><strong><code>deliminator</code></strong> :&ensp;<code>Optional[str]</code></dt>
<dd>A value use to seperate the input. Defaults to ';'</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>hash of the values</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hash_list(val: List[str], deliminator: str = &#34;;&#34;) -&gt; str:
    &#34;&#34;&#34;Hash a list of str values

    Note that the order of the list also determines the output, therefore if the input is stored in
    an unsorted collection, you should used `hash_set` instead.

    Args:
        val (List[str]): The list of str to produce a hash of
        deliminator (Optional[str]): A value use to seperate the input. Defaults to &#39;;&#39;

    Returns:
        str: hash of the values
    &#34;&#34;&#34;

    return hash_string(deliminator.join([str(x) for x in val]))</code></pre>
</details>
</dd>
<dt id="core.utils.hasher.hash_string"><code class="name flex">
<span>def <span class="ident">hash_string</span></span>(<span>val:Â str) â€‘>Â str</span>
</code></dt>
<dd>
<div class="desc"><p>Hash a str value</p>
<p>Implemented using md5.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>val</code></strong> :&ensp;<code>str</code></dt>
<dd>value to hash</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>hash of the value</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def hash_string(val: str) -&gt; str:
    &#34;&#34;&#34;Hash a str value

    Implemented using md5.

    Args:
        val (str): value to hash

    Returns:
        str: hash of the value
    &#34;&#34;&#34;
    return hashlib.md5(val.encode()).hexdigest()</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="core.utils.hasher.FILE_CACHE_CLASS"><code class="flex name class">
<span>class <span class="ident">FILE_CACHE_CLASS</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FILE_CACHE_CLASS:
    cache = {}</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="core.utils.hasher.FILE_CACHE_CLASS.cache"><code class="name">var <span class="ident">cache</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<img class='logo-img' src="https://s3.amazonaws.com/cdevframework.io/images/CoreLogo.svg" alt="site">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a class="sidebar" title="core.utils" href="index.html">core.utils</a></code></li>
</ul>
</li>
<li><h3><a class='nav-header' href="#header-functions">Functions</a></h3>
<ul >
<li><code><a class="sidebar" title="core.utils.hasher.clear_file_cache" href="#core.utils.hasher.clear_file_cache">clear_file_cache</a></code></li>
<li><code><a class="sidebar" title="core.utils.hasher.hash_file" href="#core.utils.hasher.hash_file">hash_file</a></code></li>
<li><code><a class="sidebar" title="core.utils.hasher.hash_list" href="#core.utils.hasher.hash_list">hash_list</a></code></li>
<li><code><a class="sidebar" title="core.utils.hasher.hash_string" href="#core.utils.hasher.hash_string">hash_string</a></code></li>
</ul>
</li>
<li><h3><a class='nav-header' href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a class="sidebar" title="core.utils.hasher.FILE_CACHE_CLASS" href="#core.utils.hasher.FILE_CACHE_CLASS">FILE_CACHE_CLASS</a></code></h4>
<ul >
<li><code><a class="sidebar" title="core.utils.hasher.FILE_CACHE_CLASS.cache" href="#core.utils.hasher.FILE_CACHE_CLASS.cache">cache</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>