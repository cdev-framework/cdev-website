<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>core.constructs.commands API documentation</title>
<meta name="description" content="Structures for user defined command system â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em;background:#EEE}#content{padding:20px}#sidebar{padding:30px;overflow:hidden;background:#07085d}#sidebar > *:last-child{margin-bottom:2cm}#sidebar::-webkit-scrollbar{width:8px}#sidebar::-webkit-scrollbar-track{border-radius:10px;background:#f1f1f100}#sidebar::-webkit-scrollbar-thumb{border-radius:10px;background:linear-gradient( 37deg,rgb(247,70,58) 1%,rgb(180,62,121) 80% )}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}a.sidebar{color:white;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#f7463a}a.nav-header{color:white}img.logo-img{display:block;margin-left:auto;margin-right:auto;width:25%}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#e0e0e0;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{height:100vh;overflow:auto;position:sticky;top:0;background:#07085d}#content{width:70%;max-width:200ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
<!--<link rel="stylesheet"
href='https://cdevwebsitestaging.s3.amazonaws.com/bootstrap/css/bootstrap.min.css'>-->
<script href='/bootstrap/css/bootstrap.js'></script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>core.constructs.commands</code></h1>
</header>
<section id="section-intro">
<p>Structures for user defined command system</p>
<p>One of the goals of the Core Framework is to provide flexibility such that end users can easily
create custom functionality for their projects. One way of providing this flexibility, is to provide
an easy interface for executing code from within the context of the framework from the CLI. This
process is heavily modeled and inspired by the <code>Django Command Framework</code>
(<a href="https://github.com/django/django/blob/b0ed619303d2fb723330ca9efa3acf23d49f1d19/django/core/management/base.py">https://github.com/django/django/blob/b0ed619303d2fb723330ca9efa3acf23d49f1d19/django/core/management/base.py</a>).</p>
<p>The main primitive is the <code><a class="" title="core.constructs.commands.BaseCommand" href="#core.constructs.commands.BaseCommand">BaseCommand</a></code> class. By deriving from this class, developers can create code
that is easily accessible and discoverable from the command line. To see how these class are discovered
and execute see our more in depth documentation on the command system at <link></p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Structures for user defined command system

One of the goals of the Core Framework is to provide flexibility such that end users can easily
create custom functionality for their projects. One way of providing this flexibility, is to provide
an easy interface for executing code from within the context of the framework from the CLI. This 
process is heavily modeled and inspired by the `Django Command Framework` 
(https://github.com/django/django/blob/b0ed619303d2fb723330ca9efa3acf23d49f1d19/django/core/management/base.py).

The main primitive is the `BaseCommand` class. By deriving from this class, developers can create code
that is easily accessible and discoverable from the command line. To see how these class are discovered 
and execute see our more in depth documentation on the command system at &lt;link&gt;

&#34;&#34;&#34;

import os
from argparse import ArgumentParser, HelpFormatter
import sys
from io import TextIOBase
from rich.console import Console


class CdevCommandError(BaseException):
    &#34;&#34;&#34;Base exception Class

    Exception class indicating a problem while executing a management
    command.
    If this exception is raised during the execution of a management
    command, it will be caught and turned into a nicely-printed error
    message to the appropriate output stream (i.e., stderr); as a
    result, raising this exception (with a sensible description of the
    error) is the preferred way to indicate that something has gone
    wrong in the execution of a command.
    &#34;&#34;&#34;

    def __init__(self, *args, returncode=1, **kwargs):
        self.returncode = returncode
        super().__init__(*args, **kwargs)


class CdevHelpFormatter(HelpFormatter):
    &#34;&#34;&#34;
    This is just a nice feature of the formatter. Thank you Django.

    Customized formatter so that command-specific arguments appear in the
    --help output before arguments common to all commands.
    &#34;&#34;&#34;

    show_last = {
        &#34;--version&#34;,
        &#34;--verbosity&#34;,
        &#34;--traceback&#34;,
        &#34;--settings&#34;,
        &#34;--pythonpath&#34;,
        &#34;--no-color&#34;,
        &#34;--force-color&#34;,
        &#34;--skip-checks&#34;,
    }

    def _reordered_actions(self, actions):
        return sorted(
            actions, key=lambda a: set(a.option_strings) &amp; self.show_last != set()
        )

    def add_usage(self, usage, actions, *args, **kwargs):
        super().add_usage(usage, self._reordered_actions(actions), *args, **kwargs)

    def add_arguments(self, actions):
        super().add_arguments(self._reordered_actions(actions))


class OutputWrapper(TextIOBase):
    &#34;&#34;&#34;
    Wrapper around stdout/stderr
    &#34;&#34;&#34;

    @property
    def style_func(self):
        return self._style_func

    @style_func.setter
    def style_func(self, style_func):
        if style_func and self.isatty():
            self._style_func = style_func
        else:
            self._style_func = lambda x: x

    def __init__(self, out, ending=&#34;\n&#34;):
        self._out = out
        self.style_func = None
        self.ending = ending

    def __getattr__(self, name):
        return getattr(self._out, name)

    def flush(self):
        if hasattr(self._out, &#34;flush&#34;):
            self._out.flush()

    def isatty(self):
        return hasattr(self._out, &#34;isatty&#34;) and self._out.isatty()

    def write(self, msg=&#34;&#34;, style_func=None, ending=None):
        ending = self.ending if ending is None else ending
        if ending and not msg.endswith(ending):
            msg += ending
        style_func = style_func or self.style_func
        self._out.write(style_func(msg))


class ConsoleOutputWrapper(TextIOBase):
    &#34;&#34;&#34;
    Wrapper around a `rich` console. 
    &#34;&#34;&#34;

    @property
    def style_func(self):
        return self._style_func

    @style_func.setter
    def style_func(self, style_func):
        if style_func and self.isatty():
            self._style_func = style_func
        else:
            self._style_func = lambda x: x

    def __init__(self, console: Console, ending=&#34;\n&#34;):
        self._out = console
        self.style_func = None
        self.ending = ending

    def __getattr__(self, name):
        return getattr(self._out, name)

    def flush(self):
        self._out.clear()

    def isatty(self):
        return self._out.is_terminal

    def write(self, msg: str =&#34;&#34;, style_func=None, ending=None):
        ending = self.ending if ending is None else ending
        if ending and not msg.endswith(ending):
            msg += ending
        style_func = style_func or self.style_func
        self._out.print(style_func(msg))



class BaseCommand:
    &#34;&#34;&#34;Base Class for a user defined command
    
    &#34;&#34;&#34;

    # Help message for this command
    help = &#34;&#34;

    # If this command requires the project to have been initialized
    requires_initialized_workspace = True

    # If the command should look to substitute args with cloud output values
    substitute_from_output = True

    def __init__(self, stdout: Console = None, stderr: Console = None, no_color=False, force_color=False):
        self.stdout = ConsoleOutputWrapper(stdout) if stdout else OutputWrapper(sys.stdout)
        self.stderr = ConsoleOutputWrapper(stderr) if stderr else OutputWrapper(sys.stderr)

    def create_arg_parser(self, prog_name, subcommand, **kwargs) -&gt; ArgumentParser:
        parser = ArgumentParser(
            prog=&#34;%s %s&#34; % (os.path.basename(prog_name), subcommand),
            description=self.help or None,
            formatter_class=CdevHelpFormatter,
            **kwargs
        )

        self.add_arguments(parser)

        return parser

    def add_arguments(self, parser: ArgumentParser):
        &#34;&#34;&#34;Add the cli arguments for the command
        
        &#34;&#34;&#34;
        pass

    def run_from_command_line(self, argv):
        &#34;&#34;&#34;
        Handles input from command line and builds arg parser and uses it to validate input.

        argv -&gt; [program_name, command, *args]

        program_name: represents where to find the command
        command: command to run
        *args: args for the command
        &#34;&#34;&#34;
        parser = self.create_arg_parser(argv[0], argv[1])

        options = parser.parse_args(argv[2:])

        cmd_options = vars(options)
        # Move positional args out of options to mimic legacy optparse
        args = cmd_options.pop(&#34;args&#34;, ())

        try:
            self.command(*args, **cmd_options)
        except CdevCommandError as e:
            self.stderr.write(&#34;%s: %s&#34; % (e.__class__.__name__, e))
            sys.exit(e.returncode)

    def command(self, *args, **kwargs):
        &#34;&#34;&#34;
        The actual logic of the command. Subclasses must implement
        this method.
        &#34;&#34;&#34;
        raise NotImplementedError(
            &#34;subclasses of BaseCommand must provide a command() method&#34;
        )


class BaseCommandContainer:
    &#34;&#34;&#34;
    This is used to designate that the directory is a CommandContainer and should be searched for when looking for commands.

    This class should be initialized in the __init__.py file for the folder.

    The directory should contain valid Commands or other CommandContainers
    &#34;&#34;&#34;

    # Help message for this container
    help = &#34;&#34;

    def __init__(self, stdout: Console = None, stderr: Console = None, no_color=False, force_color=False):
        self.stdout = ConsoleOutputWrapper(stdout) if stdout else OutputWrapper(sys.stdout)
        self.stderr = ConsoleOutputWrapper(stderr) if stderr else OutputWrapper(sys.stderr)

    def display_help_message(self) -&gt; str:
        self.stdout.write(self.help)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="core.constructs.commands.BaseCommand"><code class="flex name class">
<span>class <span class="ident">BaseCommand</span></span>
<span>(</span><span>stdout:Â rich.console.ConsoleÂ =Â None, stderr:Â rich.console.ConsoleÂ =Â None, no_color=False, force_color=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Base Class for a user defined command</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class BaseCommand:
    &#34;&#34;&#34;Base Class for a user defined command
    
    &#34;&#34;&#34;

    # Help message for this command
    help = &#34;&#34;

    # If this command requires the project to have been initialized
    requires_initialized_workspace = True

    # If the command should look to substitute args with cloud output values
    substitute_from_output = True

    def __init__(self, stdout: Console = None, stderr: Console = None, no_color=False, force_color=False):
        self.stdout = ConsoleOutputWrapper(stdout) if stdout else OutputWrapper(sys.stdout)
        self.stderr = ConsoleOutputWrapper(stderr) if stderr else OutputWrapper(sys.stderr)

    def create_arg_parser(self, prog_name, subcommand, **kwargs) -&gt; ArgumentParser:
        parser = ArgumentParser(
            prog=&#34;%s %s&#34; % (os.path.basename(prog_name), subcommand),
            description=self.help or None,
            formatter_class=CdevHelpFormatter,
            **kwargs
        )

        self.add_arguments(parser)

        return parser

    def add_arguments(self, parser: ArgumentParser):
        &#34;&#34;&#34;Add the cli arguments for the command
        
        &#34;&#34;&#34;
        pass

    def run_from_command_line(self, argv):
        &#34;&#34;&#34;
        Handles input from command line and builds arg parser and uses it to validate input.

        argv -&gt; [program_name, command, *args]

        program_name: represents where to find the command
        command: command to run
        *args: args for the command
        &#34;&#34;&#34;
        parser = self.create_arg_parser(argv[0], argv[1])

        options = parser.parse_args(argv[2:])

        cmd_options = vars(options)
        # Move positional args out of options to mimic legacy optparse
        args = cmd_options.pop(&#34;args&#34;, ())

        try:
            self.command(*args, **cmd_options)
        except CdevCommandError as e:
            self.stderr.write(&#34;%s: %s&#34; % (e.__class__.__name__, e))
            sys.exit(e.returncode)

    def command(self, *args, **kwargs):
        &#34;&#34;&#34;
        The actual logic of the command. Subclasses must implement
        this method.
        &#34;&#34;&#34;
        raise NotImplementedError(
            &#34;subclasses of BaseCommand must provide a command() method&#34;
        )</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a class="" title="core.default.commands.function.execute.execute" href="../default/commands/function/execute.html#core.default.commands.function.execute.execute">execute</a></li>
<li><a class="" title="core.default.commands.function.logs.show_logs" href="../default/commands/function/logs.html#core.default.commands.function.logs.show_logs">show_logs</a></li>
<li><a class="" title="core.default.commands.object_store.put_object.put_object" href="../default/commands/object_store/put_object.html#core.default.commands.object_store.put_object.put_object">put_object</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="core.constructs.commands.BaseCommand.help"><code class="name">var <span class="ident">help</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="core.constructs.commands.BaseCommand.requires_initialized_workspace"><code class="name">var <span class="ident">requires_initialized_workspace</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="core.constructs.commands.BaseCommand.substitute_from_output"><code class="name">var <span class="ident">substitute_from_output</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="core.constructs.commands.BaseCommand.add_arguments"><code class="name flex">
<span>def <span class="ident">add_arguments</span></span>(<span>self, parser:Â argparse.ArgumentParser)</span>
</code></dt>
<dd>
<div class="desc"><p>Add the cli arguments for the command</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_arguments(self, parser: ArgumentParser):
    &#34;&#34;&#34;Add the cli arguments for the command
    
    &#34;&#34;&#34;
    pass</code></pre>
</details>
</dd>
<dt id="core.constructs.commands.BaseCommand.command"><code class="name flex">
<span>def <span class="ident">command</span></span>(<span>self, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>The actual logic of the command. Subclasses must implement
this method.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def command(self, *args, **kwargs):
    &#34;&#34;&#34;
    The actual logic of the command. Subclasses must implement
    this method.
    &#34;&#34;&#34;
    raise NotImplementedError(
        &#34;subclasses of BaseCommand must provide a command() method&#34;
    )</code></pre>
</details>
</dd>
<dt id="core.constructs.commands.BaseCommand.create_arg_parser"><code class="name flex">
<span>def <span class="ident">create_arg_parser</span></span>(<span>self, prog_name, subcommand, **kwargs) â€‘>Â argparse.ArgumentParser</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_arg_parser(self, prog_name, subcommand, **kwargs) -&gt; ArgumentParser:
    parser = ArgumentParser(
        prog=&#34;%s %s&#34; % (os.path.basename(prog_name), subcommand),
        description=self.help or None,
        formatter_class=CdevHelpFormatter,
        **kwargs
    )

    self.add_arguments(parser)

    return parser</code></pre>
</details>
</dd>
<dt id="core.constructs.commands.BaseCommand.run_from_command_line"><code class="name flex">
<span>def <span class="ident">run_from_command_line</span></span>(<span>self, argv)</span>
</code></dt>
<dd>
<div class="desc"><p>Handles input from command line and builds arg parser and uses it to validate input.</p>
<p>argv -&gt; [program_name, command, *args]</p>
<p>program_name: represents where to find the command
command: command to run
*args: args for the command</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def run_from_command_line(self, argv):
    &#34;&#34;&#34;
    Handles input from command line and builds arg parser and uses it to validate input.

    argv -&gt; [program_name, command, *args]

    program_name: represents where to find the command
    command: command to run
    *args: args for the command
    &#34;&#34;&#34;
    parser = self.create_arg_parser(argv[0], argv[1])

    options = parser.parse_args(argv[2:])

    cmd_options = vars(options)
    # Move positional args out of options to mimic legacy optparse
    args = cmd_options.pop(&#34;args&#34;, ())

    try:
        self.command(*args, **cmd_options)
    except CdevCommandError as e:
        self.stderr.write(&#34;%s: %s&#34; % (e.__class__.__name__, e))
        sys.exit(e.returncode)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="core.constructs.commands.BaseCommandContainer"><code class="flex name class">
<span>class <span class="ident">BaseCommandContainer</span></span>
<span>(</span><span>stdout:Â rich.console.ConsoleÂ =Â None, stderr:Â rich.console.ConsoleÂ =Â None, no_color=False, force_color=False)</span>
</code></dt>
<dd>
<div class="desc"><p>This is used to designate that the directory is a CommandContainer and should be searched for when looking for commands.</p>
<p>This class should be initialized in the <strong>init</strong>.py file for the folder.</p>
<p>The directory should contain valid Commands or other CommandContainers</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class BaseCommandContainer:
    &#34;&#34;&#34;
    This is used to designate that the directory is a CommandContainer and should be searched for when looking for commands.

    This class should be initialized in the __init__.py file for the folder.

    The directory should contain valid Commands or other CommandContainers
    &#34;&#34;&#34;

    # Help message for this container
    help = &#34;&#34;

    def __init__(self, stdout: Console = None, stderr: Console = None, no_color=False, force_color=False):
        self.stdout = ConsoleOutputWrapper(stdout) if stdout else OutputWrapper(sys.stdout)
        self.stderr = ConsoleOutputWrapper(stderr) if stderr else OutputWrapper(sys.stderr)

    def display_help_message(self) -&gt; str:
        self.stdout.write(self.help)</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a class="" title="core.default.commands.SimpleCommandContainer" href="../default/commands/index.html#core.default.commands.SimpleCommandContainer">SimpleCommandContainer</a></li>
<li><a class="" title="core.default.commands.function.SimpleCommandContainer" href="../default/commands/function/index.html#core.default.commands.function.SimpleCommandContainer">SimpleCommandContainer</a></li>
<li><a class="" title="core.default.commands.static_site.SimpleCommandContainer" href="../default/commands/static_site/index.html#core.default.commands.static_site.SimpleCommandContainer">SimpleCommandContainer</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="core.constructs.commands.BaseCommandContainer.help"><code class="name">var <span class="ident">help</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="core.constructs.commands.BaseCommandContainer.display_help_message"><code class="name flex">
<span>def <span class="ident">display_help_message</span></span>(<span>self) â€‘>Â str</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def display_help_message(self) -&gt; str:
    self.stdout.write(self.help)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="core.constructs.commands.CdevCommandError"><code class="flex name class">
<span>class <span class="ident">CdevCommandError</span></span>
<span>(</span><span>*args, returncode=1, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Base exception Class</p>
<p>Exception class indicating a problem while executing a management
command.
If this exception is raised during the execution of a management
command, it will be caught and turned into a nicely-printed error
message to the appropriate output stream (i.e., stderr); as a
result, raising this exception (with a sensible description of the
error) is the preferred way to indicate that something has gone
wrong in the execution of a command.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CdevCommandError(BaseException):
    &#34;&#34;&#34;Base exception Class

    Exception class indicating a problem while executing a management
    command.
    If this exception is raised during the execution of a management
    command, it will be caught and turned into a nicely-printed error
    message to the appropriate output stream (i.e., stderr); as a
    result, raising this exception (with a sensible description of the
    error) is the preferred way to indicate that something has gone
    wrong in the execution of a command.
    &#34;&#34;&#34;

    def __init__(self, *args, returncode=1, **kwargs):
        self.returncode = returncode
        super().__init__(*args, **kwargs)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="core.constructs.commands.CdevHelpFormatter"><code class="flex name class">
<span>class <span class="ident">CdevHelpFormatter</span></span>
<span>(</span><span>prog, indent_increment=2, max_help_position=24, width=None)</span>
</code></dt>
<dd>
<div class="desc"><p>This is just a nice feature of the formatter. Thank you Django.</p>
<p>Customized formatter so that command-specific arguments appear in the
&ndash;help output before arguments common to all commands.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CdevHelpFormatter(HelpFormatter):
    &#34;&#34;&#34;
    This is just a nice feature of the formatter. Thank you Django.

    Customized formatter so that command-specific arguments appear in the
    --help output before arguments common to all commands.
    &#34;&#34;&#34;

    show_last = {
        &#34;--version&#34;,
        &#34;--verbosity&#34;,
        &#34;--traceback&#34;,
        &#34;--settings&#34;,
        &#34;--pythonpath&#34;,
        &#34;--no-color&#34;,
        &#34;--force-color&#34;,
        &#34;--skip-checks&#34;,
    }

    def _reordered_actions(self, actions):
        return sorted(
            actions, key=lambda a: set(a.option_strings) &amp; self.show_last != set()
        )

    def add_usage(self, usage, actions, *args, **kwargs):
        super().add_usage(usage, self._reordered_actions(actions), *args, **kwargs)

    def add_arguments(self, actions):
        super().add_arguments(self._reordered_actions(actions))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>argparse.HelpFormatter</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="core.constructs.commands.CdevHelpFormatter.show_last"><code class="name">var <span class="ident">show_last</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="core.constructs.commands.CdevHelpFormatter.add_arguments"><code class="name flex">
<span>def <span class="ident">add_arguments</span></span>(<span>self, actions)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_arguments(self, actions):
    super().add_arguments(self._reordered_actions(actions))</code></pre>
</details>
</dd>
<dt id="core.constructs.commands.CdevHelpFormatter.add_usage"><code class="name flex">
<span>def <span class="ident">add_usage</span></span>(<span>self, usage, actions, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_usage(self, usage, actions, *args, **kwargs):
    super().add_usage(usage, self._reordered_actions(actions), *args, **kwargs)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="core.constructs.commands.ConsoleOutputWrapper"><code class="flex name class">
<span>class <span class="ident">ConsoleOutputWrapper</span></span>
<span>(</span><span>console:Â rich.console.Console, ending='\n')</span>
</code></dt>
<dd>
<div class="desc"><p>Wrapper around a <code>rich</code> console.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ConsoleOutputWrapper(TextIOBase):
    &#34;&#34;&#34;
    Wrapper around a `rich` console. 
    &#34;&#34;&#34;

    @property
    def style_func(self):
        return self._style_func

    @style_func.setter
    def style_func(self, style_func):
        if style_func and self.isatty():
            self._style_func = style_func
        else:
            self._style_func = lambda x: x

    def __init__(self, console: Console, ending=&#34;\n&#34;):
        self._out = console
        self.style_func = None
        self.ending = ending

    def __getattr__(self, name):
        return getattr(self._out, name)

    def flush(self):
        self._out.clear()

    def isatty(self):
        return self._out.is_terminal

    def write(self, msg: str =&#34;&#34;, style_func=None, ending=None):
        ending = self.ending if ending is None else ending
        if ending and not msg.endswith(ending):
            msg += ending
        style_func = style_func or self.style_func
        self._out.print(style_func(msg))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>io.TextIOBase</li>
<li>_io._TextIOBase</li>
<li>io.IOBase</li>
<li>_io._IOBase</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="core.constructs.commands.ConsoleOutputWrapper.style_func"><code class="name">var <span class="ident">style_func</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def style_func(self):
    return self._style_func</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="core.constructs.commands.ConsoleOutputWrapper.flush"><code class="name flex">
<span>def <span class="ident">flush</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Flush write buffers, if applicable.</p>
<p>This is not implemented for read-only and non-blocking streams.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def flush(self):
    self._out.clear()</code></pre>
</details>
</dd>
<dt id="core.constructs.commands.ConsoleOutputWrapper.isatty"><code class="name flex">
<span>def <span class="ident">isatty</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Return whether this is an 'interactive' stream.</p>
<p>Return False if it can't be determined.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def isatty(self):
    return self._out.is_terminal</code></pre>
</details>
</dd>
<dt id="core.constructs.commands.ConsoleOutputWrapper.write"><code class="name flex">
<span>def <span class="ident">write</span></span>(<span>self, msg:Â strÂ =Â '', style_func=None, ending=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Write string to stream.
Returns the number of characters written (which is always equal to
the length of the string).</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def write(self, msg: str =&#34;&#34;, style_func=None, ending=None):
    ending = self.ending if ending is None else ending
    if ending and not msg.endswith(ending):
        msg += ending
    style_func = style_func or self.style_func
    self._out.print(style_func(msg))</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="core.constructs.commands.OutputWrapper"><code class="flex name class">
<span>class <span class="ident">OutputWrapper</span></span>
<span>(</span><span>out, ending='\n')</span>
</code></dt>
<dd>
<div class="desc"><p>Wrapper around stdout/stderr</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class OutputWrapper(TextIOBase):
    &#34;&#34;&#34;
    Wrapper around stdout/stderr
    &#34;&#34;&#34;

    @property
    def style_func(self):
        return self._style_func

    @style_func.setter
    def style_func(self, style_func):
        if style_func and self.isatty():
            self._style_func = style_func
        else:
            self._style_func = lambda x: x

    def __init__(self, out, ending=&#34;\n&#34;):
        self._out = out
        self.style_func = None
        self.ending = ending

    def __getattr__(self, name):
        return getattr(self._out, name)

    def flush(self):
        if hasattr(self._out, &#34;flush&#34;):
            self._out.flush()

    def isatty(self):
        return hasattr(self._out, &#34;isatty&#34;) and self._out.isatty()

    def write(self, msg=&#34;&#34;, style_func=None, ending=None):
        ending = self.ending if ending is None else ending
        if ending and not msg.endswith(ending):
            msg += ending
        style_func = style_func or self.style_func
        self._out.write(style_func(msg))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>io.TextIOBase</li>
<li>_io._TextIOBase</li>
<li>io.IOBase</li>
<li>_io._IOBase</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="core.constructs.commands.OutputWrapper.style_func"><code class="name">var <span class="ident">style_func</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def style_func(self):
    return self._style_func</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="core.constructs.commands.OutputWrapper.flush"><code class="name flex">
<span>def <span class="ident">flush</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Flush write buffers, if applicable.</p>
<p>This is not implemented for read-only and non-blocking streams.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def flush(self):
    if hasattr(self._out, &#34;flush&#34;):
        self._out.flush()</code></pre>
</details>
</dd>
<dt id="core.constructs.commands.OutputWrapper.isatty"><code class="name flex">
<span>def <span class="ident">isatty</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Return whether this is an 'interactive' stream.</p>
<p>Return False if it can't be determined.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def isatty(self):
    return hasattr(self._out, &#34;isatty&#34;) and self._out.isatty()</code></pre>
</details>
</dd>
<dt id="core.constructs.commands.OutputWrapper.write"><code class="name flex">
<span>def <span class="ident">write</span></span>(<span>self, msg='', style_func=None, ending=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Write string to stream.
Returns the number of characters written (which is always equal to
the length of the string).</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def write(self, msg=&#34;&#34;, style_func=None, ending=None):
    ending = self.ending if ending is None else ending
    if ending and not msg.endswith(ending):
        msg += ending
    style_func = style_func or self.style_func
    self._out.write(style_func(msg))</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<img class='logo-img' src="https://s3.amazonaws.com/cdevframework.io/images/CoreLogo.svg" alt="site">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a class="sidebar" title="core.constructs" href="index.html">core.constructs</a></code></li>
</ul>
</li>
<li><h3><a class='nav-header' href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a class="sidebar" title="core.constructs.commands.BaseCommand" href="#core.constructs.commands.BaseCommand">BaseCommand</a></code></h4>
<ul >
<li><code><a class="sidebar" title="core.constructs.commands.BaseCommand.add_arguments" href="#core.constructs.commands.BaseCommand.add_arguments">add_arguments</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.BaseCommand.command" href="#core.constructs.commands.BaseCommand.command">command</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.BaseCommand.create_arg_parser" href="#core.constructs.commands.BaseCommand.create_arg_parser">create_arg_parser</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.BaseCommand.help" href="#core.constructs.commands.BaseCommand.help">help</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.BaseCommand.requires_initialized_workspace" href="#core.constructs.commands.BaseCommand.requires_initialized_workspace">requires_initialized_workspace</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.BaseCommand.run_from_command_line" href="#core.constructs.commands.BaseCommand.run_from_command_line">run_from_command_line</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.BaseCommand.substitute_from_output" href="#core.constructs.commands.BaseCommand.substitute_from_output">substitute_from_output</a></code></li>
</ul>
</li>
<li>
<h4><code><a class="sidebar" title="core.constructs.commands.BaseCommandContainer" href="#core.constructs.commands.BaseCommandContainer">BaseCommandContainer</a></code></h4>
<ul >
<li><code><a class="sidebar" title="core.constructs.commands.BaseCommandContainer.display_help_message" href="#core.constructs.commands.BaseCommandContainer.display_help_message">display_help_message</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.BaseCommandContainer.help" href="#core.constructs.commands.BaseCommandContainer.help">help</a></code></li>
</ul>
</li>
<li>
<h4><code><a class="sidebar" title="core.constructs.commands.CdevCommandError" href="#core.constructs.commands.CdevCommandError">CdevCommandError</a></code></h4>
</li>
<li>
<h4><code><a class="sidebar" title="core.constructs.commands.CdevHelpFormatter" href="#core.constructs.commands.CdevHelpFormatter">CdevHelpFormatter</a></code></h4>
<ul >
<li><code><a class="sidebar" title="core.constructs.commands.CdevHelpFormatter.add_arguments" href="#core.constructs.commands.CdevHelpFormatter.add_arguments">add_arguments</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.CdevHelpFormatter.add_usage" href="#core.constructs.commands.CdevHelpFormatter.add_usage">add_usage</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.CdevHelpFormatter.show_last" href="#core.constructs.commands.CdevHelpFormatter.show_last">show_last</a></code></li>
</ul>
</li>
<li>
<h4><code><a class="sidebar" title="core.constructs.commands.ConsoleOutputWrapper" href="#core.constructs.commands.ConsoleOutputWrapper">ConsoleOutputWrapper</a></code></h4>
<ul >
<li><code><a class="sidebar" title="core.constructs.commands.ConsoleOutputWrapper.flush" href="#core.constructs.commands.ConsoleOutputWrapper.flush">flush</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.ConsoleOutputWrapper.isatty" href="#core.constructs.commands.ConsoleOutputWrapper.isatty">isatty</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.ConsoleOutputWrapper.style_func" href="#core.constructs.commands.ConsoleOutputWrapper.style_func">style_func</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.ConsoleOutputWrapper.write" href="#core.constructs.commands.ConsoleOutputWrapper.write">write</a></code></li>
</ul>
</li>
<li>
<h4><code><a class="sidebar" title="core.constructs.commands.OutputWrapper" href="#core.constructs.commands.OutputWrapper">OutputWrapper</a></code></h4>
<ul >
<li><code><a class="sidebar" title="core.constructs.commands.OutputWrapper.flush" href="#core.constructs.commands.OutputWrapper.flush">flush</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.OutputWrapper.isatty" href="#core.constructs.commands.OutputWrapper.isatty">isatty</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.OutputWrapper.style_func" href="#core.constructs.commands.OutputWrapper.style_func">style_func</a></code></li>
<li><code><a class="sidebar" title="core.constructs.commands.OutputWrapper.write" href="#core.constructs.commands.OutputWrapper.write">write</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>